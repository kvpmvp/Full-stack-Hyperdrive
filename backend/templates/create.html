{% extends "base.html" %}
{% block content %}
<div class="flex flex-col md:flex-row gap-6 md:items-start">
  <div class="flex items-center gap-3">
    <img src="/static/logo.svg" class="h-12 w-12" />
    <div>
      <div class="text-3xl font-semibold">Create a Project</div>
      <div class="text-slate-400">Publish your pitch deck and optionally deploy the smart contract to TestNet.</div>
    </div>
  </div>

  <!-- React wallet widget mount on create page -->
  <div class="ml-auto flex flex-col items-end gap-1">
    <div class="connect-wallet"></div>
    <div class="text-xs text-slate-400">Connect a wallet to deploy on‑chain.</div>
  </div>
</div>

<!-- IMPORTANT: post to /projects (the POST route in app.py) -->
<form method="post" action="/projects" class="mt-8 grid md:grid-cols-2 gap-6">
  <!-- Basics -->
  <div class="p-5 rounded-2xl border border-slate-800 bg-slate-900/40 md:col-span-2">
    <div class="text-lg font-semibold mb-4">Basics</div>
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label class="block text-sm mb-1">Project name</label>
        <input name="name" required class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2" />
      </div>
      <div>
        <label class="block text-sm mb-1">Creator / Team</label>
        <input name="creator" required class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2" />
      </div>
      <div>
        <label class="block text-sm mb-1">Category</label>
        <select name="category" class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2">
          <option>Defi</option>
          <option>Gaming</option>
          <option>Social</option>
          <option>Logistics</option>
          <option>Infrastructure</option>
          <option>Other</option>
        </select>
      </div>
      <div>
        <label class="block text-sm mb-1">Funding goal (ALGO)</label>
        <input name="goal_algo" type="number" step="0.01" min="0" required class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2" />
      </div>
    </div>
  </div>

  <!-- Token economics -->
  <div class="p-5 rounded-2xl border border-slate-800 bg-slate-900/40">
    <div class="text-lg font-semibold mb-4">Token / Incentives</div>
    <div class="grid gap-4">
      <div>
        <label class="block text-sm mb-1">Token ASA ID</label>
        <input name="token_asset_id" type="number" min="0" required class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2" />
      </div>
      <div>
        <label class="block text-sm mb-1">Token rate per 1 ALGO</label>
        <!-- app.py expects "token_rate" -->
        <input name="token_rate" type="number" step="0.0001" min="0" required class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2" />
      </div>
      <div>
        <label class="block text-sm mb-1">Token pool (amount escrowed)</label>
        <!-- app.py expects "token_pool" -->
        <input name="token_pool" type="number" step="1" min="0" required class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2" />
      </div>
      <div>
        <label class="block text-sm mb-1">Incentive pool (notes)</label>
        <input name="incentive_pool" class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2" />
      </div>
    </div>
  </div>

  <!-- Pitch content -->
  <div class="p-5 rounded-2xl border border-slate-800 bg-slate-900/40">
    <div class="text-lg font-semibold mb-4">Pitch Details</div>
    <div class="grid gap-4">
      <div>
        <label class="block text-sm mb-1">Product description</label>
        <textarea name="description" rows="4" class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2"></textarea>
      </div>
      <div>
        <label class="block text-sm mb-1">Problem</label>
        <textarea name="problem" rows="3" class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2"></textarea>
      </div>
      <div>
        <label class="block text-sm mb-1">Solution</label>
        <textarea name="solution" rows="3" class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2"></textarea>
      </div>
      <div>
        <label class="block text-sm mb-1">Business model</label>
        <textarea name="business_model" rows="3" class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2"></textarea>
      </div>
      <div>
        <label class="block text-sm mb-1">Investment ask</label>
        <textarea name="investment_ask" rows="2" class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2"></textarea>
      </div>
      <div>
        <label class="block text-sm mb-1">Project link</label>
        <input name="project_link" type="url" class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2" />
      </div>
      <div>
        <label class="block text-sm mb-1">Contact email</label>
        <input name="contact_email" type="email" class="w-full rounded-xl bg-slate-900 border border-slate-700 p-2" />
      </div>
    </div>
  </div>

  <!-- Deployment -->
  <div class="p-5 rounded-2xl border border-slate-800 bg-slate-900/40 md:col-span-2">
    <div class="text-lg font-semibold mb-2">On‑chain Deployment (optional)</div>
    <p class="text-xs text-slate-400 mb-4">
      Creating the stateful contract requires the project to escrow a token pool and deposit
      <b>2% of the ALGO funding goal</b>. After success, 2% fee is split per spec.
    </p>
    <label class="inline-flex items-center gap-2">
      <!-- Make checkbox send "yes" so app.py sees it -->
      <input name="deploy_now" value="yes" type="checkbox" class="rounded border-slate-700 bg-slate-900" />
      <span class="text-sm">Deploy on‑chain now (uses connected wallet)</span>
    </label>
    <div class="mt-4 flex gap-3">
      <button class="px-4 py-2 rounded-xl bg-indigo-600 hover:bg-indigo-500">Create Project</button>
      <a href="/" class="px-4 py-2 rounded-xl bg-slate-800 hover:bg-slate-700">Cancel</a>
    </div>
  </div>
</form>

{% endblock %}
